## Лекция 7. Веб-приложение в контейнерах.
  ### 7.1 Фронтенд Nginx.
  Добавим фронтенд к нашему сайту. Это можно сделать 2 способами.
    
  ![Один сервер](https://github.com/asbabushkin/Docker/blob/Lesson7/Lesson7/one-server%20scheme.png)

  При использовании одного сервера на бэкенде расположены папки с шаблонами html-страниц и static-файлами. Получив запрос, бэкенд получает данные из БД и заполняет ими шаблоны html-страниц, используя шаблонизатор (например, Jinja, Django Template Language). Полученную html-страницу отобразит пользователю.  
  Более совершенный вариант - выделить под фронтенд (статику) отдельный сервер:  
    ![Два сервера](https://github.com/asbabushkin/Docker/blob/Lesson7/Lesson7/two-server%20scheme.png)
В этом случае запрос от пользователя принимает фронт-сервер и возвращает назад html-страницу, которая содержит запрос на определенную ручку бэк-сервера. Бэк-сервер обрабатывает запрос (обращается к бд) и возвращает json-файл с данными, которые используются для заполнения html-страницы.  
Вариант с одним сервером хорош для несложных приложений с небольшой нагрузкой.  
Мы же будем использовать второй вариант.
Итак, в нашем первом контейнере будет Nginx, во втором - бэкенд, а в третьем база данных Postgres.
Nginx - это http-сервер (обработчик http-запросов). Его задачи: 
* хранение и раздача статических файлов (html, css, js);
* проксирование запросов на бэкенд.
![Nginx scheme](https://github.com/asbabushkin/Docker/blob/Lesson7/Lesson7/nginx%20scheme.png)
Описание схемы: пользователь вбивает адрес сайта и попадает на сервер с Nginx, бэкендом и бд. По номеру порта сервер понимает, что запрос следует направить Nginx'у. Nginx возвращает браузеру файл index.html с зашитыми в него ссылками на файлы стилей и js. Браузер снова отправляет запрос на сервер, тот переадресовывает его в Nginx, который отдает браузеру файлы style.css и script.js-файлы. Файлы script.js содержит запрос на получение данных из бд, поэтому вновь посылает запрос на сервер, который вновь отдает его Nginx. Но тот понимает, что запрос предназначен не ему и пропускает запрос, который попадает во второй сервер с бэкендом. Бэкенд по запросу получает данные из бд и по цепочке передает их назад.
  
  
