## Практическое занятие № 6.
### Задание 1.
Итак, давайте поправим телеграмм-бота так, чтобы он умел ходить в кликхаус.
Мы изменили подключение на следующий код:
```
 connection = Client(
     host=os.environ.get("CH_HOST"),
     user="default",
     password="",
     port=9000,
     database="todo",
 )
```
То есть теперь мы передаем host как переменную окружения CH_HOST.
Контейнер с кликхаусом мы подняли следующей командой:  
```
docker run --rm -d --name clickhouse --net=tg_bot_net yandex/clickhouse-server
```
Какое значение нужно передать, чтобы программа заработала?
#### Решение:
В качестве хоста необходимо передать имя поднятого контейнера с бд, т.е. clickhouse

### Задание 2.
Попробовать достучаться на локалхост компьютера:
```
$ curl localhost:8000
>>> curl: (56) Recv failure: Connection reset by peer
```

Чтобы достучаться до приложения, находясь внутри контейнера, выполним команду:
```
$ docker exec -it <container_name> curl localhost:8000
>>> {"Test":"OK"}
```
Получить ip-адрес контейнера и отправить на него запрос, находясь внутри контейнера:
```
$ docker inspect <container_name> | grep IPAddress
$ docker exec -it <container_name> curl <ip_address>:<8000>
>>> curl: Failed to connect to 172.17.0.2 port 8000 after 0 ms: Connection refused
```


